---
- name: create mopidy config dir
  file:
    path: ~/.config/mopidy
    state: directory
    mode: 0755

- name: Write Config
  template:
    src: mopidy_conf.j2
    dest: ~/.config/mopidy/mopidy.conf

- name: create data dir
  become: yes
  file:
    path: /data
    state: directory
    mode: 0755

- name: create beets config dir
  file:
    path: ~/.config/beets
    state: directory
    mode: 0755

# - name: create net dir
#   become: yes
#   file:
#     path: /net
#     state: directory
#     mode: 0755

- name: Create host entry
  become: yes
  lineinfile:
    path: /etc/hosts
    line: "192.168.1.4 diskstation"
    state: present

- name: Restart service autofs
  become: yes
  service:
    name: autofs
    state: restarted

# - name: setup data dir
#   become: yes
#   file:
#     src: /net/diskstation/volume1/music_store
#     dest: /data/music
#     state: link

# fdisk entry
# LABEL=EXT_MUSIC /data/music     vfat   defaults,rw,owner,flush,umask=000 0 0
# - name: Mount up device EXT_MUSIC
#   mount:
#     path: /data/music
#     src: LABEL=EXT_MUSIC
#     fstype: vfat
#     state: present
