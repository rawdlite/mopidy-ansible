- hosts: odroid
  pre_tasks:
  - name: load snd modules
    lineinfile:
      path: /etc/modules
      line: "{{ item }}"
      create: yes
      state: present
    with_items: ['snd-soc-pcm5102', 'snd-soc-odroid-dac' ]
  - name: Default Sound Device
    copy:
      src: roles/audio-cirrus/files/asound.conf
      dest: /etc/asound.conf

  roles:
    - role: utils
      extra_utils:
        - tmux
        - mplayer
        - nfs-kernel-server
        - build-essential
        - git
        - python-pip
        - alsa-base
        - alsa-utils
        - vim
    - role: docker-compose
      docker_group_users:
        - odroid
 #   - role: docker
 #     docker_group_users:
 #       - odroid
#
    - role: mopidy
      media_dir: /data/music
      spotify_user: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          66323235633335303436373066363138613836316166333431333739663965323962396636333436
          3261336231626135633966363530626361313565663232300a323930383239373136663830336231
          61393636616464643363326337663263316231633338373464636232663362376634363166616365
          3033383661626431660a373463353537393836373265653030393930616432323363323436356662
          6663
      spotify_passwd: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          35376164376335613539313263633665616464393661366263373566316665333133336463393537
          3039623031343365653237333064613061623939373134370a366262353764396561643063326335
          63376538366465336132633333616166643834636132343533313466383139616630636630336263
          3236303463373264360a636436376136383035386461633362666534323365363630343065386664
          3738
      spotify_client_id: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          32303839346630646466366537346633303038663064356338646261393932303138613334363335
          3138656162616239653335343164306634653964343838370a663634386339646137613039663361
          64373638613863393862303433353830623838396436646362393166366436363165303730323863
          3134373733626134340a343234323761353963376431343962613762633365356565626464646665
          35653965396438633236353039646335633765333037353735636432363334333133633164373532
          3135343939643837306235616634636235633261353961383637
      spotify_client_secret: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          39623361313937326134396436326534663538363039333637666266346464356264613130356138
          6636626566363562333830393639393539386130663463630a613836383737396361323831643034
          30313762383864633436656236633034663534326363363633373766363164643732316461393530
          3461383634343964370a303832326237666631316564666133393663313564366463373537613232
          32666362383963613966656436346630343833303338646532303438633761626130323463646138
          3338343236656635363838616466313530643630353332646264
      beetslibrary: /data/music/music_var/beetslibrary.blb
      playlists_dir: /data/music/music_var/playlists
      audio_output: alsasink device=hw:1,0
      audio_mixer: alsamixer
